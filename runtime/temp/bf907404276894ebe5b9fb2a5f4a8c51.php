<?php /*a:6:{s:63:"F:\project\shop\ThinkAdmin\app\data\view\base\payment\form.html";i:1648774486;s:67:"F:\project\shop\ThinkAdmin\app\data\view\..\..\admin\view\main.html";i:1648774486;s:70:"F:\project\shop\ThinkAdmin\app\data\view\base\payment\form_wechat.html";i:1648774486;s:70:"F:\project\shop\ThinkAdmin\app\data\view\base\payment\form_alipay.html";i:1648774486;s:71:"F:\project\shop\ThinkAdmin\app\data\view\base\payment\form_joinpay.html";i:1648774486;s:71:"F:\project\shop\ThinkAdmin\app\data\view\base\payment\form_voucher.html";i:1648774486;}*/ ?>
<div class="layui-card"><?php if(!(empty($title) || (($title instanceof \think\Collection || $title instanceof \think\Paginator ) && $title->isEmpty()))): ?><div class="layui-card-header"><span class="layui-icon font-s10 color-desc margin-right-5">&#xe65b;</span><?php echo htmlentities((isset($title) && ($title !== '')?$title:''),ENT_QUOTES); ?><div class="pull-right"></div></div><?php endif; ?><div class="layui-card-line"></div><div class="layui-card-body"><div class="layui-card-html"><form action="<?php echo sysuri(); ?>" class="layui-form layui-card" data-auto="true" method="post"><div class="layui-card-body"><div class="layui-form-item label-required-prev"><span class="help-label"><b>支付方式图标</b>Payment Image</span><label class="relative block label-required-null"><input class="layui-input think-bg-gray" pattern="^https?://" name="cover" placeholder="请上传支付方式图标" required value='<?php echo htmlentities((isset($vo['cover']) && ($vo['cover'] !== '')?$vo['cover']:""),ENT_QUOTES); ?>'><a class="layui-icon layui-icon-upload input-right-icon" data-field="cover" data-file data-type="png,jpg,gif,jpeg"></a><script>$('[name="cover"]').uploadOneImage()</script></label></div><label class="layui-form-item relative block"><span class="help-label"><b>支付方式名称</b>Payment Name</span><input class="layui-input" maxlength="50" name="name" placeholder="请输入支付名称" required value="<?php echo htmlentities((isset($vo['name']) && ($vo['name'] !== '')?$vo['name']:''),ENT_QUOTES); ?>"/><span class="help-block"><b>必填，</b>请填写支付方式名称，支付名称尽量不要重复，字符不要太长一般4-6个汉字</span></label><div class="layui-form-item"><span class="help-label"><b>支付通道方式</b>Payment Channel</span><label class="block full-width"><?php if(empty($vo['type']) || (($vo['type'] instanceof \think\Collection || $vo['type'] instanceof \think\Paginator ) && $vo['type']->isEmpty())): ?><select name="type" class="layui-select" lay-filter="payment-type" lay-search><?php foreach($payments as $k=>$v): if(isset($vo['type']) and $vo['type'] == $k): ?><option selected value="<?php echo htmlentities($k,ENT_QUOTES); ?>"><?php echo htmlentities($v['name'],ENT_QUOTES); ?> ( <?php echo htmlentities($v['allow'],ENT_QUOTES); ?> )</option><?php else: ?><option value="<?php echo htmlentities($k,ENT_QUOTES); ?>"><?php echo htmlentities($v['name'],ENT_QUOTES); ?> ( <?php echo htmlentities($v['allow'],ENT_QUOTES); ?> )</option><?php endif; ?><?php endforeach; ?></select><?php else: ?><select name="type" class="layui-select" disabled lay-filter="payment-type"><?php foreach($payments as $k=>$v): if(isset($vo['type']) and $vo['type'] == $k): ?><option selected value="<?php echo htmlentities($k,ENT_QUOTES); ?>"><?php echo htmlentities($v['name'],ENT_QUOTES); ?> ( <?php echo htmlentities($v['allow'],ENT_QUOTES); ?> )</option><?php else: ?><option value="<?php echo htmlentities($k,ENT_QUOTES); ?>"><?php echo htmlentities($v['name'],ENT_QUOTES); ?> ( <?php echo htmlentities($v['allow'],ENT_QUOTES); ?> )</option><?php endif; ?><?php endforeach; ?></select><input name="type" type="hidden" value="<?php echo htmlentities($vo['type'],ENT_QUOTES); ?>"><?php endif; ?><span class="help-block"><b>必选，</b>请选择预置的支付方式，支付通道创建之后不能修改，请谨慎选择并配置参数</span></label></div><div class="layui-hide" data-payment-type="wechat"><label class="layui-form-item block relative"><span class="help-label"><b>绑定公众号</b>Bind WeChat Appid</span><input class="layui-input" maxlength="18" name="wechat_appid" pattern="^wx[0-9a-z]{16}$" placeholder="请输入18位绑定公众号（必填）" required value="<?php echo htmlentities((isset($vo['content']['wechat_appid']) && ($vo['content']['wechat_appid'] !== '')?$vo['content']['wechat_appid']:''),ENT_QUOTES); ?>"><span class="help-block">公众号APPID，微信商户绑定的服务号APPID或小程序APPID</span></label><label class="layui-form-item block relative"><span class="help-label"><b>微信商户号</b>WeChat Payment Number</span><input class="layui-input" name="wechat_mch_id" placeholder="请输入微信商户号（必填）" required value="<?php echo htmlentities((isset($vo['content']['wechat_mch_id']) && ($vo['content']['wechat_mch_id'] !== '')?$vo['content']['wechat_mch_id']:''),ENT_QUOTES); ?>"><span class="help-block">微信商户编号，需要在微信商户平台获取，微信商户号 与 公众号APPID 匹配</span></label><label class="layui-form-item block relative"><span class="help-label"><b>微信商户密钥</b>WeChat Payment Secret Key</span><input class="layui-input" maxlength="32" name="wechat_mch_key" pattern=".{32}" placeholder="请输入32位微信商户密钥（必填）" required value="<?php echo htmlentities((isset($vo['content']['wechat_mch_key']) && ($vo['content']['wechat_mch_key'] !== '')?$vo['content']['wechat_mch_key']:''),ENT_QUOTES); ?>"><span class="help-block">微信商户密钥，需要在微信商户平台操作设置密码并获取密钥，建议定期更换密钥</span></label><label class="layui-form-item layui-hide relative"><span class="help-label"><b>微信商户密钥文件内容</b>（ 需要填写文件的全部内容 ）</span><textarea class="layui-textarea" name="wechat_mch_key_text" placeholder="请输入微信KEY密钥内容"><?php echo htmlentities((isset($vo['content']['wechat_mch_key_text']) && ($vo['content']['wechat_mch_key_text'] !== '')?$vo['content']['wechat_mch_key_text']:''),ENT_QUOTES); ?></textarea><span class="help-block">从商户平台上下载支付证书，解压并取得其中的 apiclient_key.pem 用记事本打开并复制文件内容填至此处</span></label><label class="layui-form-item layui-hide relative"><span class="help-label"><b>微信商户证书文件内容</b>（ 需要填写文件的全部内容 ）</span><textarea class="layui-textarea" name="wechat_mch_cert_text" placeholder="请输入微信CERT证书内容"><?php echo htmlentities((isset($vo['content']['wechat_mch_cert_text']) && ($vo['content']['wechat_mch_cert_text'] !== '')?$vo['content']['wechat_mch_cert_text']:''),ENT_QUOTES); ?></textarea><span class="help-block">从商户平台上下载支付证书，解压并取得其中的 apiclient_cert.pem 用记事本打开并复制文件内容填至此处</span></label></div><div class="layui-hide" data-payment-type="alipay"><label class="layui-form-item block relative"><span class="help-label"><b>支付宝商户编号</b>Alipay Payment Number</span><input class="layui-input" name="alipay_appid" placeholder="请输入支付宝商户编号（必填）" required value="<?php echo htmlentities((isset($vo['content']['alipay_appid']) && ($vo['content']['alipay_appid'] !== '')?$vo['content']['alipay_appid']:''),ENT_QUOTES); ?>"><span class="help-block">支付宝商户编号，开通企业支付宝的唯一商户编号</span></label><label class="layui-form-item block relative"><span class="help-label"><b>支付宝私钥文件内容</b>（ 需要填写文件的全部内容 ）</span><textarea class="layui-textarea" name="alipay_private_key" placeholder="请输入支付宝私钥文件内容（必填）" required><?php echo htmlentities((isset($vo['content']['alipay_private_key']) && ($vo['content']['alipay_private_key'] !== '')?$vo['content']['alipay_private_key']:''),ENT_QUOTES); ?></textarea><span class="help-block">从商户平台上下载支付证书，解压并取得其中的支付宝私钥文件用记事本打开并复制文件内容填至此处</span></label><label class="layui-form-item block relative"><span class="help-label"><b>应用公钥证书文件内容</b>（ 需要填写文件的全部内容 ）</span><textarea class="layui-textarea" name="alipay_public_key" placeholder="请输入应用公钥证书文件内容（必填）" required><?php echo htmlentities((isset($vo['content']['alipay_public_key']) && ($vo['content']['alipay_public_key'] !== '')?$vo['content']['alipay_public_key']:''),ENT_QUOTES); ?></textarea><span class="help-block">从商户平台上下载支付证书，解压并取得其中的应用公钥证书文件用记事本打开并复制文件内容填至此处</span></label></div><div class="layui-hide" data-payment-type="joinpay"><label class="layui-form-item block relative"><span class="help-block"><b>商户绑定的公众号</b></span><input class="layui-input" name="joinpay_appid" placeholder="请输入商户绑定的公众号（必填）" required value="<?php echo htmlentities((isset($vo['content']['joinpay_appid']) && ($vo['content']['joinpay_appid'] !== '')?$vo['content']['joinpay_appid']:''),ENT_QUOTES); ?>"><span class="help-block">商户绑定的公众号，授权给汇聚支付平台的公众号APPID</span></label><label class="layui-form-item block relative"><span class="help-label"><b>汇聚支付报备商户号</b></span><input class="layui-input" maxlength="15" name="joinpay_trade" placeholder="请输入汇聚支付报备商户号（必填）" required value="<?php echo htmlentities((isset($vo['content']['joinpay_trade']) && ($vo['content']['joinpay_trade'] !== '')?$vo['content']['joinpay_trade']:''),ENT_QUOTES); ?>"><span class="help-block">汇聚支付报备商户号，需要联系汇聚支付平台的客服获取，通常以 777 开头的15位数字！</span></label><label class="layui-form-item block relative"><span class="help-label"><b>汇聚支付的商户编号</b></span><input class="layui-input" maxlength="15" name="joinpay_mch_id" placeholder="请输入汇聚支付的商户编号（必填）" required value="<?php echo htmlentities((isset($vo['content']['joinpay_mch_id']) && ($vo['content']['joinpay_mch_id'] !== '')?$vo['content']['joinpay_mch_id']:''),ENT_QUOTES); ?>"><span class="help-block">汇聚支付的商户编号，需要在汇聚支付平台商户中心获取，通常是以 888 开头的15位数字！</span></label><label class="layui-form-item block relative"><span class="help-label"><b>汇聚支付的商户密钥</b></span><input class="layui-input" maxlength="32" name="joinpay_mch_key" placeholder="请输入汇聚支付的商户密钥（必填）" required value="<?php echo htmlentities((isset($vo['content']['joinpay_mch_key']) && ($vo['content']['joinpay_mch_key'] !== '')?$vo['content']['joinpay_mch_key']:''),ENT_QUOTES); ?>"><span class="help-block">汇聚支付的商户密钥，需要在汇聚支付平台商户中心的密钥管理处获取，通常为32位字符串！</span></label></div><div class="layui-hide" data-payment-type="voucher"><div class="layui-form-item label-required-prev"><span class="help-label"><b>线下支付二维码</b>Payment Qrcode Image</span><label class="relative block label-required-null"><input class="layui-input" name="voucher_qrcode" pattern="^https?://" placeholder="请上传线下支付二维码图片 &nbsp;&nbsp;&nbsp;&nbsp;" required value='<?php echo htmlentities((isset($vo['content']['voucher_qrcode']) && ($vo['content']['voucher_qrcode'] !== '')?$vo['content']['voucher_qrcode']:""),ENT_QUOTES); ?>'><a class="layui-icon layui-icon-upload input-right-icon" data-field="voucher_qrcode" data-file data-type="png,jpg,gif"></a><script>$('[name="voucher_qrcode"]').uploadOneImage()</script></label></div></div><label class="layui-form-item relative layui-hide"><span class="help-label"><b>支付描述</b>Payment Remark</span><textarea class="layui-textarea" name="remark" placeholder="请输入支付描述"><?php echo htmlentities((isset($vo['remark']) && ($vo['remark'] !== '')?$vo['remark']:''),ENT_QUOTES); ?></textarea></label><div class="hr-line-dashed"></div><?php if(!(empty($vo['id']) || (($vo['id'] instanceof \think\Collection || $vo['id'] instanceof \think\Paginator ) && $vo['id']->isEmpty()))): ?><input name='id' type='hidden' value='<?php echo htmlentities($vo['id'],ENT_QUOTES); ?>'><?php endif; if(!(empty($vo['code']) || (($vo['code'] instanceof \think\Collection || $vo['code'] instanceof \think\Paginator ) && $vo['code']->isEmpty()))): ?><input name='code' type='hidden' value='<?php echo htmlentities($vo['code'],ENT_QUOTES); ?>'><?php endif; ?><div class="layui-form-item text-center"><button class="layui-btn" type='submit'>保存数据</button><button class="layui-btn layui-btn-danger" data-confirm="确定要取消编辑吗？" data-history-back type='button'>取消编辑</button></div></div></form></div></div><script>    (function (apply) {
        apply({value: $('select[name=type]').val()});
        layui.form.on('select(payment-type)', apply);
    })(function (data) {
        if (data.value.indexOf('wechat') > -1) {
            $('[data-payment-type]').not($('[data-payment-type="wechat"]').removeClass('layui-hide')).addClass('layui-hide');
        } else if (data.value.indexOf('alipay') > -1) {
            $('[data-payment-type]').not($('[data-payment-type="alipay"]').removeClass('layui-hide')).addClass('layui-hide');
        } else if (data.value.indexOf('joinpay') > -1) {
            $('[data-payment-type]').not($('[data-payment-type="joinpay"]').removeClass('layui-hide')).addClass('layui-hide');
        } else if (data.value.indexOf('voucher') > -1) {
            $('[data-payment-type]').not($('[data-payment-type="voucher"]').removeClass('layui-hide')).addClass('layui-hide');
        } else {
            $('[data-payment-type]').addClass('layui-hide');
        }
    });
</script></div>